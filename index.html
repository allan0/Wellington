<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Essential Mini App Viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no, user-scalable=no">
    <title>Wellington Campus - Innovative Education</title> <!-- Adjusted Title -->

    <!-- Standard Meta -->
    <meta name="description" content="Discover innovative courses, diverse education, and a thriving campus community at Wellington Campus, UAE.">
    <meta name="keywords" content="Wellington Campus, UAE university, education, courses, admissions, Telegram Mini App, profile">
    <meta name="author" content="Wellington Campus">
    <meta property="og:title" content="Wellington Campus - Innovative Education in UAE">
    <meta property="og:description" content="Explore our diverse programs and innovative learning environment at Wellington Campus.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://wellingtoncampus.co/index.html"> <!-- Update -->
    <meta property="og:image" content="./wellingtoncampus.png"> <!-- Update Path -->
    <meta property="og:image:alt" content="Wellington Campus Logo">
    <link rel="icon" href="./favicon.ico" type="image/x-icon"> <!-- Update Path -->

    <!-- **Telegram Mini App Script - MUST be first script** -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <!-- Stylesheets -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Poppins:wght@600&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #d4af37; /* Gold */
            --secondary-color: #003366; /* Dark Blue */
            --text-color: #212529;
            --bg-color: #cce5ff; /* Light Blueish */
            --accent-color: #ffffff; /* White */
            --card-bg-color: rgba(255, 255, 255, 0.9);
            --shadow: 0 8px 24px rgba(0,0,0,0.1);
            --border-radius: 15px;
            --bottom-nav-bg: var(--accent-color);
            --bottom-nav-icon: #6c757d;
            --bottom-nav-active: var(--primary-color);
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Roboto', sans-serif;
            color: var(--text-color);
            background-color: var(--bg-color);
            background-image: linear-gradient(45deg, rgba(255,255,255,0.1) 25%, transparent 25%, transparent 75%, rgba(255,255,255,0.1) 75%, rgba(255,255,255,0.1)),
                              linear-gradient(45deg, rgba(255,255,255,0.1) 25%, transparent 25%, transparent 75%, rgba(255,255,255,0.1) 75%, rgba(255,255,255,0.1));
            background-size: 20px 20px;
            font-size: 1.05rem;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            min-height: var(--tg-viewport-height, 100vh);
            box-sizing: border-box;
            overflow-x: hidden;
            padding-bottom: calc(80px + var(--tg-safe-area-inset-bottom, 0px)); /* Adjusted padding */
        }

        /* --- Header & Logo Styling --- */
        #main-header {
            text-align: center;
            margin-bottom: 1rem;
            position: relative;
            padding-top: 1rem;
        }
        #header-logo {
            display: block; margin: 0 auto 0.5rem auto; max-width: 100px; width: 100px; height: auto;
            position: relative; top: 0; left: 0; z-index: 10; cursor: pointer;
            transition: width 0.4s ease-in-out, max-width 0.4s ease-in-out, top 0.4s ease-in-out,
                        left 0.4s ease-in-out, padding 0.4s ease-in-out, border-radius 0.4s ease-in-out,
                        background-color 0.4s ease-in-out, box-shadow 0.4s ease-in-out;
        }
        #header-logo.logo-scrolled {
            position: fixed; top: 8px; left: 12px; width: 45px; max-width: 45px; height: auto;
            z-index: 1045; margin: 0; background-color: rgba(255, 255, 255, 0.85);
            padding: 4px; border-radius: 50%; box-shadow: 0 3px 8px rgba(0, 51, 102, 0.3);
        }
        body.logo-state-scrolled .container { padding-top: 10px; }

        /* --- User Profile Styling --- */
        #user-profile {
            position: fixed; /* Stick to viewport */
            top: 8px;
            right: 12px;
            font-size: 0.85rem;
            color: var(--secondary-color);
            background-color: rgba(255, 255, 255, 0.85); /* Similar to scrolled logo bg */
            padding: 5px 10px;
            border-radius: 20px; /* Pill shape */
            display: flex;
            align-items: center;
            z-index: 1045; /* Same level as scrolled logo */
            box-shadow: 0 2px 5px rgba(0, 51, 102, 0.2);
            transition: top 0.4s ease-in-out; /* Smooth transition if needed */
        }
        #user-avatar {
            display: inline-block;
            width: 28px; /* Size of the circle */
            height: 28px;
            border-radius: 50%;
            margin-right: 8px;
            vertical-align: middle;
            background-color: #e9ecef; /* Fallback bg */
            text-align: center;
            line-height: 28px; /* Center emoji vertically */
            font-size: 18px; /* Emoji size */
            overflow: hidden; /* Clip image */
        }
        #user-avatar img {
            display: block; /* Remove extra space */
            width: 100%;
            height: 100%;
            object-fit: cover; /* Cover the circle area */
        }
        #user-name-display {
            font-weight: 600;
            margin-right: 5px;
            white-space: nowrap; /* Prevent name wrapping */
            overflow: hidden; /* Hide overflow */
            text-overflow: ellipsis; /* Add ... if too long */
            max-width: 100px; /* Limit name width */
        }
        #welly-points { font-weight: bold; margin-left: 5px; }
        #user-profile .fa-star { margin-left: 5px; }


        /* --- Mini App Specific Adjustments --- */
        .navbar-custom { display: none; }
        .bottom-nav { display: flex; position: fixed; bottom: 0; left: 0; right: 0; width: 100%; background-color: var(--bottom-nav-bg); box-shadow: 0 -2px 10px rgba(0,0,0,0.1); padding: 0.5rem 0 max(0.5rem, var(--tg-safe-area-inset-bottom, 0.5rem)); z-index: 1040; }

        /* Keep all other existing styles the same... */
         h1, h2, h3 { font-family: 'Poppins', sans-serif; color: var(--secondary-color); }
         h1 { font-size: 1.8rem; margin-bottom: 0.3rem; }
         h3 { font-size: 1.2rem; margin-bottom: 0.8rem;}
         .banner { position: relative; background: url('./wellingtoncampus.png') no-repeat center center; background-size: contain; background-color: rgba(0, 51, 102, 0.1); color: var(--text-color); padding: 4rem 1rem 5rem 1rem; text-align: center; border-radius: var(--border-radius); box-shadow: var(--shadow); overflow: hidden; min-height: 300px; margin-bottom: 1.5rem; display: flex; flex-direction: column; justify-content: center; align-items: center; }
         .banner::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.25); z-index: 1; border-radius: inherit; }
         .banner h1, .banner p, .banner .btn-custom { position: relative; z-index: 2; color: var(--accent-color); }
         .banner h1 { text-shadow: 1px 1px 3px rgba(0,0,0,0.4); }
         .banner p { font-size: 1.1rem; margin-bottom: 1.5rem; max-width: 600px; }
         .banner .btn-custom { margin-top: 1rem; }
         .content-section { margin-bottom: 1.5rem; background-color: var(--card-bg-color); border-radius: var(--border-radius); box-shadow: var(--shadow); border: none; overflow: hidden; }
         .content-section-header { background-color: var(--secondary-color); color: var(--accent-color); font-weight: 600; border-bottom: 3px solid var(--primary-color); padding: 0.8rem 1.2rem; display: flex; align-items: center; }
         .content-section-header h2 { color: var(--accent-color); margin: 0; font-size: 1.1rem; }
         .content-section-header i { margin-right: 0.75rem; font-size: 1.1rem; color: var(--primary-color); }
         .content-section-body { padding: 1.5rem; }
         .feature-card { padding: 1.5rem; text-align: center; background-color: rgba(255, 255, 255, 0.7); border-radius: 10px; transition: transform 0.3s ease, box-shadow 0.3s ease; height: 100%; display: flex; flex-direction: column; justify-content: space-between; border: 1px solid rgba(0, 51, 102, 0.1); }
         .feature-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0, 51, 102, 0.1); }
         #intro-video-container { margin-top: 1rem; border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1); width: 100%; line-height: 0; }
         #introVideo { width: 100%; height: auto; display: block; max-height: 40vh; object-fit: cover; }
         .subscription-form form { margin-top: 1rem; }
         .subscription-form .form-control { border-radius: 50px; padding: 0.7rem 1.2rem; }
         .subscription-form .btn-custom { border-radius: 50px; padding: 0.7rem 1.5rem; width: 100%; }
         .btn-custom { background-color: var(--primary-color); color: var(--accent-color) !important; border: none; padding: 0.8rem 2rem; border-radius: 25px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(212,175,55,0.3); font-weight: 600; text-decoration: none; display: inline-block; }
         .btn-custom:hover { background-color: #b8860b; transform: translateY(-3px); box-shadow: 0 6px 20px rgba(212,175,55,0.4); color: var(--accent-color) !important; }
         .bottom-nav .btn { color: var(--bottom-nav-icon); background-color: transparent; border: none; padding: 0.5rem; font-size: 0.85rem; display: flex; flex-direction: column; align-items: center; transition: color 0.3s ease; text-decoration: none; }
         .bottom-nav .btn:hover, .bottom-nav .btn.active { color: var(--bottom-nav-active); }
         .bottom-nav i { font-size: 1.1rem; margin-bottom: 0.15rem; }
         .animate-on-scroll { opacity: 0; transition: opacity 0.7s ease-out, transform 0.7s ease-out; }
         .fade-in { opacity: 0; }
         .slide-up { transform: translateY(40px); }
         .slide-left { transform: translateX(-40px); }
         .slide-right { transform: translateX(40px); }
         .animate-on-scroll.visible { opacity: 1; transform: translateY(0) translateX(0); }
         .container { transition: none; }

    </style>
</head>
<body>
    <!-- User Profile Display (Top Right) -->
    <div id="user-profile">
        <span id="user-avatar">
            <!-- Image or Emoji will be inserted here by JS -->
        </span>
        <span id="user-name-display">Player</span>
        | <i class="fas fa-star"></i> <!-- Star icon for points -->
        <span id="welly-points">0</span> WP
    </div>

    <!-- Main Content Container -->
    <div class="container mt-2" id="home">

        <!-- Header Section -->
        <header id="main-header">
            <!-- Logo with ID for JS -->
            <img src="./wellingtoncampus.png" alt="Wellington Campus Logo" id="header-logo">
            <!-- Title/Subtitle remain relative -->
            <h1>Wellington Campus</h1>
            <p class="hackathon-subtitle small text-muted">Innovative Education in the UAE</p>
        </header>

       
        <!-- Features Section (New Card Structure) -->
        <section class="content-section animate-on-scroll slide-up">
            <div class="content-section-header">
                <h2><i class="fas fa-star"></i> Key Features</h2>
            </div>
            <div class="content-section-body">
                <div class="row g-3">
                    <!-- Card 1: Innovative Courses -->
                    <div class="col-md-4 d-flex align-items-stretch">
                        <div class="feature-card animate-on-scroll slide-left">
                            <div>
                                <h3><i class="fas fa-lightbulb text-primary mb-2"></i><br>Innovative Courses</h3>
                                <p class="small">Cutting-edge programs in tech, design, and business.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Card 2: Top Instructors -->
                    <div class="col-md-4 d-flex align-items-stretch">
                        <div class="feature-card animate-on-scroll slide-up">
                             <div>
                                <h3><i class="fas fa-chalkboard-teacher text-primary mb-2"></i><br>Top Instructors</h3>
                                <p class="small">Learn from industry leaders and renowned academics.</p>
                             </div>
                        </div>
                    </div>
                    <!-- Card 3: Online Education & Video -->
                    <div class="col-md-4 d-flex align-items-stretch">
                        <div class="feature-card animate-on-scroll slide-right">
                            <div>
                                <h3><i class="fas fa-globe text-primary mb-2"></i><br>Online Education</h3>
                                <p class="small">Flexible learning options available 24/7, from anywhere.</p>
                            </div>
                            <div id="intro-video-container">
                                <video id="introVideo" controls muted playsinline preload="metadata" aria-label="Binciya Introduction Video">
                                    <source src="./Binciya-Introduction.mp4#t=38" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
 <!-- Banner Section -->
        <section class="banner animate-on-scroll fade-in">
            <h1>Discover, Learn, Thrive</h1>
            <p>Spring 2025 Applications Now Open!</p>
            <a href="admissions.html" target="_self" class="btn btn-custom">Apply Now</a>
        </section>

        <!-- Subscription Section (New Card Structure) -->
        <section class="content-section subscription-form animate-on-scroll fade-in">
            <div class="content-section-header">
                <h2><i class="fas fa-envelope-open-text"></i> Stay Informed</h2>
            </div>
            <div class="content-section-body">
                <p class="text-center small">Subscribe for updates on courses, events, and admissions.</p>
                <form class="row g-2 justify-content-center" aria-label="Subscription form">
                    <div class="col-md-6 col-8">
                        <input type="email" class="form-control form-control-sm" placeholder="Enter your email" aria-label="Email" required>
                    </div>
                    <div class="col-md-3 col-4">
                        <button type="submit" class="btn btn-custom btn-sm">Subscribe</button>
                    </div>
                </form>
            </div>
        </section>

    </div> <!-- End Main Container -->

    <!-- Bottom Navigation -->
    <nav class="bottom-nav" aria-label="Mobile navigation">
         <div class="d-flex justify-content-around w-100">
             <!-- Link to hackathon.html as requested -->
             <a href="index.html" target="_self" class="btn active"><i class="fas fa-home"></i>Home</a>
             <a href="courses.html" target="_self" class="btn"><i class="fas fa-book"></i>LMS</a>
             <a href="game.html" target="_self" class="btn"><i class="fas fa-puzzle-piece"></i>Quest</a>
             <a href="hackathons.html" target="_self" class="btn"><i class="fas fa-laptop-code"></i>Hackathon</a>
         </div>
     </nav>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    <!-- Mini App & Custom Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const tg = window.Telegram.WebApp;

            // --- Element References ---
            const logo = document.getElementById('header-logo');
            const bodyElement = document.body;
            const videoElement = document.getElementById('introVideo');
            const animatedElements = document.querySelectorAll('.animate-on-scroll');
            const subForm = document.querySelector('.subscription-form form');
            const userNameDisplay = document.getElementById('user-name-display');
            const wellyPointsDisplay = document.getElementById('welly-points');
            const userAvatarContainer = document.getElementById('user-avatar');

            // --- Initialize Telegram Mini App ---
            function initializeTelegramApp() {
                if (tg && tg.initDataUnsafe) { // Check for initDataUnsafe specifically
                    tg.ready();

                    // Configure Back Button for Home Page
                    tg.BackButton.hide();
                    tg.onEvent('backButtonClicked', function() { tg.close(); });

                    // --- Display User Profile ---
                    const currentUser = tg.initDataUnsafe.user;
                    if (currentUser) {
                        // Display Name
                        if (userNameDisplay) {
                            userNameDisplay.textContent = currentUser.first_name || 'Player';
                        }

                        // Display Avatar (or Fallback Emoji)
                        if (userAvatarContainer) {
                            userAvatarContainer.innerHTML = ''; // Clear previous content
                            if (currentUser.photo_url) {
                                const img = document.createElement('img');
                                img.src = currentUser.photo_url;
                                img.alt = `${currentUser.first_name || 'User'}'s profile picture`;
                                // Styles applied via CSS (#user-avatar img)
                                userAvatarContainer.appendChild(img);
                            } else {
                                // Fallback Emoji
                                userAvatarContainer.textContent = '🎓'; // Graduation Cap Emoji
                            }
                        }

                        // Display Points (Initialized to 0 - needs CloudStorage for persistence)
                        if (wellyPointsDisplay) {
                            // TODO: Load actual points from CloudStorage if implemented
                            wellyPointsDisplay.textContent = '0';
                            // Example loading (uncomment and adapt if using CloudStorage):
                            /*
                            tg.CloudStorage.getItem('totalWellyPoints', (error, value) => {
                                if (!error && value) {
                                    wellyPointsDisplay.textContent = parseInt(value, 10) || 0;
                                } else {
                                    wellyPointsDisplay.textContent = '0';
                                    if(error) console.error("CloudStorage Error:", error);
                                }
                            });
                            */
                        }

                    } else {
                        console.warn("User data not found in initDataUnsafe.");
                        // Optionally hide profile or show defaults if no user data
                        if(userNameDisplay) userNameDisplay.textContent = 'Guest';
                        if(userAvatarContainer) userAvatarContainer.textContent = '👤'; // Default person emoji
                        if(wellyPointsDisplay) wellyPointsDisplay.textContent = '0';
                    }

                    console.log("Telegram Mini App Initialized on Home Page.");

                } else {
                    console.warn("Not running in Telegram context or initDataUnsafe unavailable.");
                     // Handle non-Telegram UI (e.g., hide profile)
                     const profileElement = document.getElementById('user-profile');
                     if(profileElement) profileElement.style.display = 'none';
                }
            }
            initializeTelegramApp();

            // --- Shrinking Logo Logic ---
            const scrollThreshold = 30;
            if (logo) {
                const handleScroll = () => {
                    const isScrolled = window.scrollY > scrollThreshold;
                    logo.classList.toggle('logo-scrolled', isScrolled);
                    bodyElement.classList.toggle('logo-state-scrolled', isScrolled);
                };
                logo.addEventListener('click', () => { window.scrollTo({ top: 0, behavior: 'smooth' }); });
                window.addEventListener('scroll', handleScroll, { passive: true });
                handleScroll();
            } else { console.warn("Header logo element (#header-logo) not found."); }

            // --- Intersection Observer for Video Start Time ---
            let videoTimeSet = false;
            if (videoElement) {
                const videoObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting && entry.intersectionRatio >= 0.5 && !videoTimeSet) {
                            try {
                                videoElement.currentTime = 38;
                                videoTimeSet = true;
                                observer.unobserve(entry.target);
                            } catch (e) { console.warn("Could not set video time yet:", e); }
                        }
                    });
                }, { threshold: 0.5 });
                videoObserver.observe(videoElement);
            } else { console.warn("Video element (#introVideo) not found."); }

            // --- Intersection Observer for Scroll Animations ---
            if ("IntersectionObserver" in window && animatedElements.length > 0) {
                const animationObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                            observer.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.1 });
                animatedElements.forEach(el => animationObserver.observe(el));
            } else {
                animatedElements.forEach(el => el.classList.add('visible'));
                console.warn("IntersectionObserver not supported or no elements to animate.");
            }

            // --- Subscription Form Handler ---
             if (subForm) {
                 subForm.addEventListener('submit', function(e) {
                     e.preventDefault();
                     const emailInput = this.querySelector('input[type="email"]');
                     const email = emailInput ? emailInput.value : 'N/A';
                     console.log("Subscription attempt:", email);
                      if (tg) { tg.showAlert('Thank you for subscribing!'); }
                      else { alert('Thank you for subscribing!'); }
                     this.reset();
                 });
             }
        });
    </script>

</body>
</html>
