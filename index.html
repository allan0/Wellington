<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Essential Mini App Viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no, user-scalable=no, viewport-fit=cover">
    <title>Wellington Campus</title>

    <!-- Standard Meta -->
    <meta name="description" content="Wellington Campus Mini App: Explore courses, quests, hackathons, and track your progress.">
    <meta name="keywords" content="Wellington Campus, UAE university, education, courses, admissions, Telegram Mini App, profile, points, leaderboard, quests, hackathon, game, LMS">
    <meta name="author" content="Wellington Campus">
    <meta property="og:title" content="Wellington Campus Mini App">
    <meta property="og:description" content="Your hub for Wellington Campus activities: courses, quests, hackathons, and profile management.">
    <meta property="og:type" content="website">
    <!-- Update URL if deploying -->
    <meta property="og:url" content="https://wellingtoncampus.co/index.html">
    <meta property="og:image" content="./wellingtoncampus.png">
    <meta property="og:image:alt" content="Wellington Campus Logo">
    <link rel="icon" href="./favicon.ico" type="image/x-icon">

    <!-- **Telegram Mini App Script - MUST be first script** -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <!-- Stylesheets -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Poppins:wght@600&display=swap" rel="stylesheet">
    <!-- Link to your combined CSS file -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Always Fixed User Profile Display -->
    <div id="user-profile" data-bs-toggle="modal" data-bs-target="#userProfileModal">
        <span id="user-avatar">ðŸ‘¤</span>
        <span id="user-name-display">Player</span>
        | <i class="fas fa-star"></i>
        <span id="welly-points">0</span>Â WP
        <!-- Fullscreen Toggle Button -->
        <button id="fullscreen-toggle-btn" title="Toggle Fullscreen" class="btn btn-sm p-0 ms-2">
            <i class="fas fa-expand"></i>
        </button>
    </div>

    <!-- Always Fixed Header Logo -->
    <img src="./wellingtoncampus.png" alt="Wellington Campus Logo" id="header-logo">

    <!-- Main Content Area (Dynamically Filled) -->
    <main id="content-area" class="container"></main>

    <!-- Bottom Navigation (Always Visible unless fullscreen) -->
    <nav class="bottom-nav" aria-label="Mobile navigation">
         <div class="d-flex justify-content-around w-100">
             <!-- Use data-view attribute for easier JS targeting -->
             <a href="#home" data-view="home" class="btn active"><i class="fas fa-home"></i>Home</a>
             <a href="#lms" data-view="lms" class="btn"><i class="fas fa-book"></i>LMS</a>
             <a href="#quest" data-view="quest" class="btn"><i class="fas fa-puzzle-piece"></i>Quest</a>
             <a href="#hackathon" data-view="hackathon" class="btn"><i class="fas fa-laptop-code"></i>Hackathon</a>
         </div>
     </nav>

    <!-- Modals (Structure only, content handled by JS potentially) -->

    <!-- Profile Modal -->
    <div class="modal fade" id="userProfileModal" tabindex="-1" aria-labelledby="userProfileModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="userProfileModalLabel">Your Profile</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="modal-user-avatar">ðŸ‘¤</div>
                    <h4 id="modal-user-name">Player Name</h4>
                    <div id="modal-welly-points-display">
                        <i class="fas fa-star"></i> <span id="modal-welly-points">0</span> WP
                    </div>
                    <div id="profile-rank-display">Rank: Calculating...</div>
                    <div id="profile-leaderboard-section">
                        <h5><i class="fas fa-trophy me-2" style="color: var(--primary-color);"></i>Leaderboard (Top 5)</h5>
                        <div id="leaderboard-loading" class="text-center" style="display: none;">Loading leaderboard...</div>
                        <div id="leaderboard-empty" class="text-center" style="display: none;">Leaderboard is empty or unavailable.</div>
                        <div class="table-responsive">
                            <table class="table table-striped table-hover table-sm caption-top" id="profile-leaderboard-table">
                                <thead><tr><th scope="col" style="width: 15%; text-align: center;">Rank</th><th scope="col">Player</th><th scope="col" style="width: 30%; text-align: right;">Points</th></tr></thead>
                                <tbody id="profile-leaderboard-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer justify-content-between">
                    <div>
                        <button type="button" class="btn btn-danger btn-sm" id="delete-progress-btn">
                            <i class="fas fa-trash-alt me-1"></i> Reset Progress
                        </button>
                        <div id="reset-feedback" class="small"></div>
                    </div>
                    <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Hackathon: Task Tracker Modal -->
    <div class="modal fade" id="taskTrackerModal" tabindex="-1" aria-labelledby="taskTrackerModalLabel" aria-hidden="true">
         <div class="modal-dialog modal-lg modal-dialog-scrollable">
             <div class="modal-content">
                 <div class="modal-header">
                     <h5 class="modal-title" id="taskTrackerModalLabel"><i class="fas fa-tasks me-2"></i>Day 1 Tasks & Points</h5>
                     <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                 </div>
                 <div class="modal-body">
                     <p class="text-muted small">Tap task to verify & mark complete. Earn Welly Points!</p>
                     <div id="task-message-area" class="mb-3"></div>
                     <!-- Checklist items will be added here by JS if needed, or kept in hackathon-content.html -->
                     <div class="checklist" id="modal-checklist"></div>
                 </div>
                 <div class="modal-footer"> <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Close</button> </div>
             </div>
         </div>
     </div>

    <!-- Hackathon: AI Judge Modal -->
    <div class="modal fade" id="aiJudgeModal" tabindex="-1" aria-labelledby="aiJudgeModalLabel" aria-hidden="true">
         <div class="modal-dialog modal-lg modal-dialog-scrollable">
             <div class="modal-content">
                 <div class="modal-header"> <h5 class="modal-title" id="aiJudgeModalLabel"><i class="fas fa-brain me-2"></i>AI Judge Sim</h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> </div>
                 <div class="modal-body">
                     <p class="text-muted small">Select a registered team, click Judge.</p>
                     <div class="row g-2 align-items-end mb-3">
                         <div class="col-8"> <label for="judgeTeamSelect" class="form-label visually-hidden">Select Team:</label> <select class="form-select form-select-sm" id="judgeTeamSelect"> <option selected disabled value="">-- Choose Registered Team --</option> </select> </div>
                         <div class="col-4"> <button class="btn btn-primary w-100 btn-sm" type="button" id="judgeProjectBtn"> <i class="fas fa-play me-1"></i> Judge </button> </div>
                     </div>
                     <div id="judgeLoader" class="text-center py-3" style="display: none;"> <div class="spinner-border spinner-border-sm text-primary" role="status"> <span class="visually-hidden">Loading...</span> </div> <p class="small mt-2">AI analyzing...</p> </div>
                     <div id="judgeResultsArea" style="display: none;"> <h5 id="judgeResultTeamName" class="small"></h5> <div id="judgeResultAnalysis"> <h6 class="small">Analysis:</h6> <ul id="judgeResultAnalysisList" class="small list-unstyled"></ul> </div> <div id="judgeResultScore" class="mt-2 fw-bold"></div> </div>
                     <p class="mb-0 small text-muted fst-italic mt-3"> <i class="fas fa-info-circle me-1"></i> Simulation only. </p>
                     <hr class="my-3">
                     <div id="leaderboardSection">
                         <h5 class="text-center mb-2 small"><i class="fas fa-trophy me-2" style="color: var(--primary-color);"></i>AI Judge Leaderboard</h5>
                         <div class="table-responsive">
                             <table class="table table-striped table-hover table-sm align-middle small">
                                 <thead class="table-dark small"> <tr> <th scope="col" style="width: 15%; text-align: center;">Rank</th> <th scope="col">Team</th> <th scope="col" style="width: 25%; text-align: center;">Score</th> </tr> </thead>
                                 <tbody id="leaderboard-body"> <tr id="leaderboard-placeholder"> <td colspan="3" class="text-center text-muted fst-italic py-2 small">Judge teams to populate...</td> </tr> </tbody>
                             </table>
                         </div>
                     </div>
                 </div>
                 <div class="modal-footer"> <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Close</button> </div>
             </div>
         </div>
     </div>

    <!-- Hackathon: Registration Modal -->
    <div class="modal fade" id="registrationModal" tabindex="-1" aria-labelledby="registrationModalLabel" aria-hidden="true">
         <div class="modal-dialog modal-dialog-centered">
             <div class="modal-content">
                 <div class="modal-header"> <h5 class="modal-title" id="registrationModalLabel"><i class="fas fa-users me-2"></i>Hackathon Team Registration</h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> </div>
                 <div class="modal-body">
                     <form id="registrationForm">
                         <div class="mb-3"> <label for="participantName" class="form-label small">Your Name:</label> <input type="text" class="form-control form-control-sm" id="participantName" readonly disabled> </div>
                         <div class="mb-3"> <label for="universityInput" class="form-label small">Your University/Institution:<span class="text-danger">*</span></label> <input type="text" class="form-control form-control-sm" id="universityInput" required placeholder="e.g., Wellington University"> </div>
                         <hr>
                         <p class="small text-muted">Choose ONE option below (max 4 members per team):</p>
                         <div class="mb-3"> <label for="existingTeamSelect" class="form-label small">1. Join Existing Team:</label> <select class="form-select form-select-sm" id="existingTeamSelect"> <option value="">-- Select a team to join --</option> </select> <div id="team-member-count" class="form-text small"></div> </div>
                         <div class="mb-3 text-center small fw-bold">OR</div>
                         <div class="mb-3"> <label for="newTeamNameInput" class="form-label small">2. Create New Team:</label> <input type="text" class="form-control form-control-sm" id="newTeamNameInput" placeholder="Enter unique team name"> </div>
                         <div id="registrationFeedback" class="text-center small mt-2" style="min-height: 1.2em;"></div>
                     </form>
                 </div>
                 <div class="modal-footer"> <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Cancel</button> <button type="button" class="btn btn-primary btn-sm" id="submitRegistrationBtn"> <i class="fas fa-check me-1"></i> Confirm Registration </button> </div>
             </div>
         </div>
     </div>

    <!-- Quest: Loader Overlay (Moved from game.html) -->
    <div id="quiz-loader-overlay">
         <div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div>
         <p>AI preparing your challenge questions...</p>
    </div>

    <!-- Universal: Flying Score Element -->
    <div id="flying-score-element"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <!-- Link to your combined JS file -->
    <script src="app.js"></script>

</body>
</html>
